# Há»† THá»NG QUáº¢N LÃ TOUR Ná»˜I Bá»˜

Há»‡ thá»‘ng quáº£n lÃ½ tour ná»™i bá»™ dÃ nh cho cÃ´ng ty du lá»‹ch vá»›i 2 vai trÃ²: **Admin** vÃ  **HÆ°á»›ng dáº«n viÃªn**.

## ğŸ¯ TÃ­nh nÄƒng chÃ­nh

### I. PHÃ‚N QUYá»€N NGÆ¯á»œI DÃ™NG

#### 1. Admin (Äiá»u hÃ nh tour)
- ToÃ n quyá»n quáº£n lÃ½ dá»¯ liá»‡u
- Táº¡o/chá»‰nh sá»­a/xÃ³a tour
- PhÃ¢n cÃ´ng hÆ°á»›ng dáº«n viÃªn
- Theo dÃµi hoáº¡t Ä‘á»™ng, quáº£n lÃ½ bÃ¡o cÃ¡o

#### 2. HÆ°á»›ng dáº«n viÃªn (HDV)
- Xem tour Ä‘Æ°á»£c phÃ¢n cÃ´ng
- Cáº­p nháº­t tÃ¬nh tráº¡ng tour háº±ng ngÃ y
- Ná»™p bÃ¡o cÃ¡o, hÃ¬nh áº£nh, chi phÃ­, nháº­t kÃ½ hÃ nh trÃ¬nh
- Xem lá»‹ch cÃ¡ nhÃ¢n

### II. CHá»¨C NÄ‚NG CHO ADMIN

1. **Quáº£n lÃ½ tour**
   - Danh má»¥c tour: trong nÆ°á»›c, quá»‘c táº¿, tour theo yÃªu cáº§u
   - ThÃ´ng tin tour: tÃªn, lá»‹ch trÃ¬nh, giÃ¡ gá»‘c ná»™i bá»™, cáº¥p Ä‘á»™ Æ°u tiÃªn
   - Quáº£n lÃ½ tráº¡ng thÃ¡i: sáº¯p diá»…n ra â€“ Ä‘ang diá»…n ra â€“ Ä‘Ã£ káº¿t thÃºc â€“ há»§y
   - Upload file PDF chÆ°Æ¡ng trÃ¬nh tour

2. **Quáº£n lÃ½ lá»‹ch trÃ¬nh (Itinerary)**
   - Tá»«ng ngÃ y cá»§a tour: Ä‘á»‹a Ä‘iá»ƒm, hoáº¡t Ä‘á»™ng, giá» khá»Ÿi hÃ nh
   - Upload tÃ i liá»‡u: hÆ°á»›ng dáº«n, timeline, checklist

3. **Quáº£n lÃ½ HDV**
   - Danh sÃ¡ch HDV: há»“ sÆ¡, nÄƒng lá»±c, kinh nghiá»‡m, sá»‘ tour Ä‘Ã£ Ä‘i
   - PhÃ¢n cÃ´ng HDV
   - Quáº£n lÃ½ cháº¥m cÃ´ng cá»§a HDV theo tour

4. **Quáº£n lÃ½ xe & tÃ i nguyÃªn**
   - Quáº£n lÃ½ xe Ä‘Æ°a Ä‘Ã³n, biá»ƒn sá»‘, tÃ i xáº¿
   - GÃ¡n xe cho tour
   - TÃ¬nh tráº¡ng sáºµn sÃ ng cá»§a xe

5. **Quáº£n lÃ½ chi phÃ­ â€“ tÃ i chÃ­nh**
   - Chi phÃ­ theo tour: Äƒn uá»‘ng, khÃ¡ch sáº¡n, vÃ© tham quan, xÄƒng xe, chi phÃ­ phÃ¡t sinh
   - Tá»± Ä‘á»™ng tÃ­nh tá»•ng chi phÃ­ tour
   - Xuáº¥t bÃ¡o cÃ¡o chi phÃ­ cuá»‘i tour

6. **Quáº£n lÃ½ khÃ¡ch ná»™i bá»™**
   - Danh sÃ¡ch khÃ¡ch cá»§a tour (admin tá»± nháº­p)
   - ThÃ´ng tin cÃ¡ nhÃ¢n, mÃ£ tour, ghi chÃº

7. **BÃ¡o cÃ¡o â€“ Thá»‘ng kÃª**
   - Sá»‘ tour theo thÃ¡ng
   - Doanh thu ná»™i bá»™ hoáº·c chi phÃ­ tour
   - Thá»‘ng kÃª sá»‘ láº§n Ä‘i tour cá»§a HDV
   - BÃ¡o cÃ¡o tá»•ng há»£p theo thá»i gian

8. **Quáº£n lÃ½ sá»± cá»‘ & pháº£n há»“i**
   - Ghi chÃº sá»± cá»‘ trong tour
   - ÄÃ¡nh giÃ¡ HDV (ná»™i bá»™)
   - BÃ n giao cuá»‘i tour

### III. CHá»¨C NÄ‚NG CHO HÆ¯á»šNG DáºªN VIÃŠN

1. **Lá»‹ch cÃ¡ nhÃ¢n**
   - Xem tour Ä‘Æ°á»£c phÃ¢n cÃ´ng
   - Xem timeline, lá»‹ch trÃ¬nh tour

2. **Cáº­p nháº­t nháº­t kÃ½ tour**
   - Check-in: Ä‘Ã£ báº¯t Ä‘áº§u dáº«n tour
   - Cáº­p nháº­t hoáº¡t Ä‘á»™ng tá»«ng ngÃ y
   - Gá»­i hÃ¬nh áº£nh, video (minh chá»©ng)
   - Ghi nháº­n tÃ¬nh tráº¡ng khÃ¡ch

3. **Cáº­p nháº­t chi phÃ­**
   - Äiá»n chi phÃ­ thá»±c táº¿ háº±ng ngÃ y
   - Upload hÃ³a Ä‘Æ¡n chá»¥p áº£nh
   - Gá»­i bÃ¡o cÃ¡o tá»•ng há»£p cho admin

4. **BÃ¡o cÃ¡o sá»± cá»‘**
   - BÃ¡o cÃ¡o tÃ¬nh hÃ¬nh tour: thá»i tiáº¿t, giao thÃ´ng, trá»… giá»â€¦
   - BÃ¡o cÃ¡o khÃ¡ch gáº·p váº¥n Ä‘á»
   - BÃ¡o cÃ¡o tháº¥t láº¡c, máº¥t Ä‘á»“

5. **Káº¿t thÃºc tour**
   - Gá»­i biÃªn báº£n káº¿t thÃºc tour
   - Checklist bÃ n giao
   - ÄÃ¡nh giÃ¡ tour (ná»™i bá»™)

## ğŸ“‹ YÃªu cáº§u há»‡ thá»‘ng

- PHP >= 7.4
- MySQL >= 5.7 hoáº·c MariaDB >= 10.2
- Apache/Nginx web server
- phpMyAdmin (Ä‘á»ƒ quáº£n lÃ½ database)

## ğŸš€ CÃ i Ä‘áº·t

### BÆ°á»›c 1: Clone hoáº·c táº£i dá»± Ã¡n

```bash
cd C:\laragon\www\duan1
```

### BÆ°á»›c 2: Cáº¥u hÃ¬nh database

1. Má»Ÿ phpMyAdmin (http://localhost/phpmyadmin)
2. Táº¡o database má»›i: `tour_management`
3. Import file `database/tour_management.sql`
4. Cáº­p nháº­t file `configs/env.php` náº¿u cáº§n:
   ```php
   define('DB_NAME', 'tour_management');
   define('DB_USERNAME', 'root');
   define('DB_PASSWORD', '');
   ```

### BÆ°á»›c 3: Cáº¥u hÃ¬nh URL

Cáº­p nháº­t `BASE_URL` trong file `configs/env.php`:
```php
define('BASE_URL', 'http://localhost/duan1/');
```

### BÆ°á»›c 4: Táº¡o thÆ° má»¥c upload

Äáº£m báº£o thÆ° má»¥c `assets/uploads/` cÃ³ quyá»n ghi.

## ğŸ‘¤ TÃ i khoáº£n máº·c Ä‘á»‹nh

Sau khi import database:

**Admin:**
- Username: `admin`
- Password: `admin123` (cáº§n hash láº¡i trong thá»±c táº¿)

**HÆ°á»›ng dáº«n viÃªn:**
- Username: `guide1`
- Password: `guide123` (cáº§n hash láº¡i trong thá»±c táº¿)

âš ï¸ **LÆ¯U Ã:** Äá»•i password ngay sau khi cÃ i Ä‘áº·t!

## ğŸ“ Cáº¥u trÃºc dá»± Ã¡n

```
duan1/
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ uploads/          # ThÆ° má»¥c upload file
â”œâ”€â”€ configs/
â”‚   â”œâ”€â”€ env.php           # Cáº¥u hÃ¬nh mÃ´i trÆ°á»ng
â”‚   â””â”€â”€ helper.php        # HÃ m helper
â”œâ”€â”€ controllers/          # Controllers
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ tour_management.sql  # File SQL database
â”‚   â””â”€â”€ README.md         # HÆ°á»›ng dáº«n database
â”œâ”€â”€ models/               # Models
â”‚   â”œâ”€â”€ BaseModel.php
â”‚   â”œâ”€â”€ UserModel.php
â”‚   â”œâ”€â”€ TourModel.php
â”‚   â””â”€â”€ ...
â”œâ”€â”€ routes/               # Äá»‹nh tuyáº¿n
â”œâ”€â”€ views/                # Views
â””â”€â”€ index.php            # Entry point
```

## ğŸ—„ï¸ Cáº¥u trÃºc Database

Há»‡ thá»‘ng cÃ³ 17 báº£ng chÃ­nh:

1. `users` - NgÆ°á»i dÃ¹ng (Admin, HDV)
2. `tour_categories` - Danh má»¥c tour
3. `tours` - ThÃ´ng tin tour
4. `itineraries` - Lá»‹ch trÃ¬nh tour (tá»«ng ngÃ y)
5. `tour_assignments` - PhÃ¢n cÃ´ng HDV
6. `vehicles` - Quáº£n lÃ½ xe
7. `vehicle_assignments` - GÃ¡n xe cho tour
8. `cost_categories` - Loáº¡i chi phÃ­
9. `tour_costs` - Chi phÃ­ tour
10. `tour_customers` - KhÃ¡ch ná»™i bá»™
11. `tour_daily_logs` - Nháº­t kÃ½ hÃ ng ngÃ y
12. `tour_images` - HÃ¬nh áº£nh tour
13. `tour_incidents` - Sá»± cá»‘
14. `tour_attendance` - Cháº¥m cÃ´ng HDV
15. `tour_reports` - BÃ¡o cÃ¡o
16. `tour_feedbacks` - ÄÃ¡nh giÃ¡
17. `tour_documents` - TÃ i liá»‡u tour

Xem chi tiáº¿t trong file `database/README.md`

## ğŸ”§ Models Ä‘Ã£ táº¡o

- `UserModel` - Quáº£n lÃ½ ngÆ°á»i dÃ¹ng
- `TourModel` - Quáº£n lÃ½ tour
- `TourCategoryModel` - Quáº£n lÃ½ danh má»¥c tour
- `TourAssignmentModel` - Quáº£n lÃ½ phÃ¢n cÃ´ng HDV
- `TourCostModel` - Quáº£n lÃ½ chi phÃ­
- `CostCategoryModel` - Quáº£n lÃ½ loáº¡i chi phÃ­
- `ItineraryModel` - Quáº£n lÃ½ lá»‹ch trÃ¬nh
- `TourCustomerModel` - Quáº£n lÃ½ khÃ¡ch
- `TourDailyLogModel` - Quáº£n lÃ½ nháº­t kÃ½
- `VehicleModel` - Quáº£n lÃ½ xe
- `TourIncidentModel` - Quáº£n lÃ½ sá»± cá»‘

## ğŸ“ Ghi chÃº

- Dá»± Ã¡n sá»­ dá»¥ng PHP thuáº§n (khÃ´ng framework)
- Database sá»­ dá»¥ng MySQL/MariaDB
- File upload lÆ°u trong `assets/uploads/`
- Password Ä‘Æ°á»£c hash báº±ng `password_hash()` cá»§a PHP

## ğŸ” Báº£o máº­t

- Hash password báº±ng `password_hash()`
- Sá»­ dá»¥ng PDO vá»›i prepared statements
- Validate input tá»« ngÆ°á»i dÃ¹ng
- Kiá»ƒm tra quyá»n truy cáº­p theo role

## ğŸ“ Há»— trá»£

Náº¿u cÃ³ váº¥n Ä‘á», vui lÃ²ng kiá»ƒm tra:
1. Cáº¥u hÃ¬nh database trong `configs/env.php`
2. Quyá»n ghi cá»§a thÆ° má»¥c `assets/uploads/`
3. Log lá»—i PHP

---

**ChÃºc báº¡n phÃ¡t triá»ƒn dá»± Ã¡n thÃ nh cÃ´ng! ğŸ‰**

